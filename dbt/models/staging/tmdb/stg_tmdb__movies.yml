# stg_tmdb__movies.yml

version: 2

models:
  - name: stg_tmdb__movies
    description: "Staging model for TMDB movie list data from /discover/movie or /movie/popular endpoints."
    columns:
      - name: movie_id
        description: "Unique identifier for each movie."
        tests:
          - not_null
          - unique

      - name: title
        description: "Movie title."

      - name: original_language
        description: "ISO 639-1 language code of the original production language, standardized to lowercase."

      - name: release_date
        description: "Official release date of the movie."
        tests:
          - dbt_expectations.expect_column_values_to_be_between:
              min_value: "'1900-01-01'"
              max_value: "'today'"

      - name: popularity
        description: "Popularity score assigned by TMDB."
        tests:
          - dbt_expectations.expect_column_values_to_be_between:
              min_value: 0


      - name: vote_average
        description: "Average user rating on TMDB."
        tests:
          - dbt_expectations.expect_column_values_to_be_between:
              min_value: 0

      - name: vote_count
        description: "Number of votes used to compute the vote_average."
        tests:
          - dbt_expectations.expect_column_values_to_be_between:
              min_value: 0

      - name: overview
        description: "Brief plot summary of the movie."

      - name: genre_ids
        description: "Array of genre IDs associated with the movie (JSONB format)."

      - name: adult
        description: "Indicates whether the movie is adult content (true/false)."

      - name: video
        description: "Indicates whether the movie has an associated video (true/false)."

      - name: backdrop_path
        description: "Relative path to the movie's backdrop image."

      - name: poster_path
        description: "Relative path to the movie's poster image."